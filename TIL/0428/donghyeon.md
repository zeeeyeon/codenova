# 2025.04.28(월)

### KPT 작성

#### `Keep` : 현재 만족하고 있는 부분, 계속 이어갔으면 하는 부분
- 타자 자판 입력 및 정답 유무 판단이 잘 되는듯 하다


#### `Problem` : 불편하게 느끼는 부분, 개선이 필요하다고 생각되는 부분
- 디자인 부분의 디테일이 뭔가 아쉽다.. 2프로 부족하다
- 일단 기능을 완성한 후에 디자인 피드백을 받아봐야 할 거 같다. 

#### `Try` : problem에 대한 해결책, 다음 회고 때 판별 가능한 것, 당장 실행 가능한 것
- 일단 싱글모드 기능을 모두 넣고 생각해보자
- 이제 정확도나 속도 시간 이런거 해야지지

---
#### `Today`

##### 타자 기능을 구현하는중 생긴 일

1. 코드 줄 분리했더니 양쪽에 빈 줄이 생김
**원인**
- 받은 코드에 양끝에 \n이 붙어있음
**해결**    
- split 후 .filter(line => line.trim() !== '') 추가해서 빈 줄 제거

2. 한 줄 입력 완료 조건이 맞지 않음
**원인**
- 유저 입력(currentInput)과 정답 줄(currentLine)을 단순히 ===로 비교했음
- 탭(\t), 공백, 줄 끝 줄바꿈 문자 때문에 비교가 정확하지 않음
**해결**
- normalizeLine() 함수 만들어서 탭을 4칸 공백으로 변환하고, 공백/줄바꿈 정리한 후 비교
- normalizeLine(currentInput) === normalizeLine(currentLine)

3. 탭(Tab) 키 입력이 안 먹음
**원인**
- 브라우저 기본 동작(탭 누르면 포커스 이동) 때문에 div에서는 탭 입력이 안 됨
**해결**
- handleKeyDown에서 Tab 키 누를 때 e.preventDefault() 호출
- 입력값에 \t를 직접 추가해서 관리

4. currentInput 표시할 때 탭/공백이 제대로 보이지 않음
**원인**
- HTML 기본 출력에서는 공백(' '), 탭(\t)이 화면에 제대로 표시되지 않음
**해결**
- pre 태그 + whitespace-pre-wrap 스타일 사용
- \t를 \u00A0\u00A0\u00A0\u00A0(공백 4개)로 변환해서 화면에 출력

5. currentInput과 rawCode 매칭 인덱스가 안 맞음
**원인**
- 탭(\t)은 문자열 길이로는 1글자지만, 시각적으로는 4칸 공백만큼 공간을 차지해서 인덱스가 밀림

**해결**
- normalizeLine()을 통해 탭을 공백 4칸으로 변환
- 변환된 줄과 입력값을 기준으로 한 글자씩 비교

6. 엔터 쳐도 다음 줄로 안 넘어감
**원인**
- 엔터 입력 처리할 때도 currentInput === currentLine 단순 비교만 했음
- 탭/공백/줄바꿈 문제로 실제로는 값이 다르게 인식됨
**해결**
- 엔터 입력 시에도 normalizeLine(currentInput) === normalizeLine(currentLine)로 비교해서 정확히 매칭되었을 때만 다음 줄로 넘어가게 처리

7. 공백/탭 문제로 오타 없이 쳤는데 틀렸다고 나옴
**원인**
- 탭(\t)과 스페이스(' ')를 다르게 인식하거나, Windows 줄바꿈(CRLF: \r\n) 문제 발생
- 줄 끝에 쓸데없는 공백이나 \r이 남아 있을 수 있음
**해결**
- normalizeLine() return line.replace(/\t/g, ' '.repeat(tabSize)) 적용
- 탭은 4칸 공백으로, \r 제거, 줄 끝 공백도 제거해서 비교 안정성 확보

